﻿
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>BTG ACCOUNTS SOLUTION</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta content="Coderthemes" name="author" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- App favicon -->
    <link rel="shortcut icon" href="assets/images/logo.ico">
    <!-- Sweet Alert-->
    <!-- App css -->
    <link href="BTG/assets/css/bootstrap.min.css" rel="stylesheet" type="text/css" id="bootstrap-stylesheet" />

    <link href="BTG/css/mb.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">


    <style>
        * {
            box-sizing: border-box;
        }

        body {
            font-family: Arial, Helvetica, sans-serif;
        }

        /* Float four columns side by side */
        .column {
            float: left;
            width: 25%;
            padding: 0 10px;
        }

        /* Remove extra left and right margins, due to padding */
        .row {
            margin: 0 -5px;
        }

            /* Clear floats after the columns */
            .row:after {
                content: "";
                display: table;
                clear: both;
            }

        /* Responsive columns */
        @media screen and (max-width: 600px) {
            .column {
                width: 100%;
                display: block;
                margin-bottom: 20px;
            }
        }

        /* Style the counter cards */
        .card {
            box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
            padding: 16px;
            text-align: center;
            background-color: #f1f1f1;
        }
    </style>
</head>




<body class="sidebar-mini" style="height: auto; min-height: 100%;">
    <div class="wrapper" style="height: auto; min-height: 100%;">
        <input type="text" class="form-control" placeholder="Enter Level 1 Name" id="txtDate1" style="border-radius:0px !important; display:none;">
        <input type="text" class="form-control" placeholder="Enter Level 1 Name" id="txtDate2" style="border-radius:0px !important; display:none;">
        <header class="main-header">
            <!--<a href="#" class="sidebar-toggle" data-toggle="push-menu" role="button">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>-->
            <a href="./index3.html" class="logo">
                <span id="businessName" class="logo-lg">BTG ACCOUNTS SOLUTION</span>
            </a>




            <div class="Float-Right">

                <!--<div class="row">

     <div class="column">
         <div class="pull-right">
             <a href="#" class="btn btn-default btn-flat" onclick="Logout()">Sign out</a>
         </div>
    </div>
    </div>-->

                <b>
                    <a href="./index3.html" class="logo" data-toggle="modal" data-target="#myAddExpes" id="NewProjectCreate">
                        Create New Project
                    </a>
                </b>



                <a href="./index3.html" class="logo " onclick="Logout()">
                    Sign out
                </a>




            </div>


        </header>
        <header class="main-header-orangebar"></header>
        <div class="content-wrapper" style="min-height: 206px;">

            <section id="scrollbox" class="content dashboard">



                <section id="maincontents" class="content-inr expense">
                    <div class="business-tittle">
                        <img src="assets/img/ASlogo.png" alt="" height="100" style=" width: 200px; height: 134px;">
                        <h1>  SELECT PROJECT </h1>
                        <p class="B-Desc">SELECT YOUR PROJECT FROM THE LIST ADDED BELOW.</p>
                    </div>

                    <div class="authentication-bg BG-Color">
                        <div class="team-section">
                            <div class="inner-width">
                                <div id="business_div" class="pers">
                                    <div class="row" id="SelectProjects">

                                        <!--<div class="column">
                                            <div class="card">
                                                <h3>Card 1</h3>
                                                <p>Some text</p>
                                                <p>Some text</p>
                                            </div>
                                        </div>-->


                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>





                </section>



            </section>



            <div class="clear"></div>
            <!--<footer class="main-footer">
                <div class="pull-right hidden-xs">

                </div>

                <strong>
                    <img src="assets/img/ASlogo.png">
                </strong>
            </footer>-->
            <div class="clear"></div>
        </div>


    </div>


    <div id="myAddExpes" class="modal fade">
        <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header" style="background-color:#747572;">

                    <h4 class="modal-title small text-white"><span id="ModelTitle"></span> Add New Project</h4>
                    <button type="button" class="close text-white" data-dismiss="modal" onmouseup="Opt = 'Cancel';">&times;</button>

                </div>
                <div class="modal-body">

                    <div id="inputDiv" class="row bg-white  " style="padding:10px;margin:0px !important;">
                        <div class=" col-gl-12 col-md-12 col-sm-12">
                            <div class="d-flex w-100 "></div>


                            <div class="input-group small mt-2 ">
                               
                                <input id="txtProject" type="text" inputmode="numeric" class="form-control" placeholder="Enter Project Name" />
                            </div>



                            <div class="mt-2 Float-Right">
                                <div class="col-lg-12 col-md-12 col-sm-12 pt-3">
                                    <!--<a id="btnReset" href="#" class="btn btn-flat" onclick="Clear();"> <span class="btn-name">Reset </span> </a>-->
                                    <a id="btnsave" href="#" class="btn btn-default btn-flat" onclick="CreateProjects();"> <span class="btn-name">Save  </span> </a>
                                </div>
                            </div>
                        </div>

                    </div>

                </div>
                <!--<div class="modal-footer">
                <button type="button" class="btn btn-default small bg-success text-white" data-dismiss="modal" onmouseup="Opt = 'Yes';">Yes</button>
                <button type="button" class="btn btn-default small bg-secondary text-white" data-dismiss="modal" onmouseup="Opt = 'No';">No</button>
                    </div>-->
            </div>

        </div>
    </div>



    <!-- end page -->
    <!-- Vendor js -->
    <script src="BTG/assets/js/vendor.min.js"></script>
    <!-- App js -->
    <script src="BTG/assets/js/app.min.js"></script>
    <!-- Plugin js-->
    <script src="BTG/assets/libs/parsleyjs/parsley.min.js"></script>
    <!-- Validation init js-->
    <script src="BTG/assets/js/pages/form-validation.init.js"></script>



    <script>


        GetProjects()
        function GetProjects() {
            var SubUserId = sessionStorage.getItem("SubUserId")




            if (SubUserId == "") {
                GetBusinessProjects()
            }
            else {
                GetAssignedProject()
                document.getElementById("NewProjectCreate").style.display ='none'
            }

        }





        function GetAssignedProject() {



            var SubUserId = sessionStorage.getItem("SubUserId")
            $.ajax({
                type: 'POST',
                url: 'Project.asmx/GetAssignedProject',
                dataType: 'json',
                data: "{'SubUserId':'" + SubUserId + "'}",
                contentType: 'application/json; charset=utf-8',

                success: function (response) {
                    var txt = '{"Row": ' + response.d + '}';
                    var data = JSON.parse(txt);
                    var str = "";
                    var dt = "";
                    var mRow = 0;
                    for (var i = 0; i < data.Row.length; i++) {
                        mRow = mRow + 1;

                        dt = dt + '   <div class="column" onclick=OpenProject("' + data.Row[i].ProjectId + '") style="cursor: pointer;">'
                        dt = dt + '       <div class="card">'
                        dt = dt + '           <h3>' + data.Row[i].ProjectName + '</h3>'
                        //dt = dt +'           <p>Some text</p>'
                        //dt = dt +'           <p>Some text</p>'
                        dt = dt + '       </div>'
                        dt = dt + '   </div>'



                        str = str + dt;
                        dt = "";
                    }
                    document.getElementById("SelectProjects").innerHTML = str;

                },
                error: function (error) {
                    console.log(error);
                }
            });
        }



        function GetBusinessProjects() {

            var UserId = sessionStorage.getItem("UserID");

            $.ajax({
                type: 'POST',
                url: 'Project.asmx/GetProjects',
                dataType: 'json',
                data: "{'UserId':'" + UserId + "'}",
                contentType: 'application/json; charset=utf-8',

                success: function (response) {
                    var txt = '{"Row": ' + response.d + '}';
                    var data = JSON.parse(txt);
                    var str = "";
                    var dt = "";
                    var mRow = 0;
                    for (var i = 0; i < data.Row.length; i++) {
                        mRow = mRow + 1;

                        dt = dt + '   <div class="column" onclick=OpenProject("' + data.Row[i].ProjectID + '") style="cursor: pointer;">'
                       // dt = dt + '       <div class="card"><i class="fa fa-edit" style="font-size:20px;"></i>'
                        dt = dt + '       <div class="card">'
                        dt = dt + '           <h3>' + data.Row[i].ProjectName + '</h3>'
                        //dt = dt +'           <p>Some text</p>'
                        //dt = dt +'           <p>Some text</p>'
                        dt = dt + '       </div>'
                        dt = dt + '   </div>'



                        str = str + dt;
                        dt = "";
                    }
                    document.getElementById("SelectProjects").innerHTML = str;

                },
                error: function (error) {
                    console.log(error);
                }
            });
        }


        function Logout() {

            window.sessionStorage.removeItem("UserID");
            window.sessionStorage.removeItem("UserName");
            window.sessionStorage.removeItem("UserTitle");
            window.sessionStorage.removeItem("email");
            window.sessionStorage.removeItem("CellNo");
            window.sessionStorage.removeItem("DateofCreation");
            window.sessionStorage.removeItem("ActiveStatus");

            /////////////////////////////////////////////////////

            window.sessionStorage.removeItem("CurrentPage");
            window.sessionStorage.removeItem("StartDate");
            window.sessionStorage.removeItem("NetWorth");
            window.sessionStorage.removeItem("AccountData");
            window.sessionStorage.removeItem("LastPage");
            window.sessionStorage.removeItem("DashBoard");
            window.sessionStorage.removeItem("EndDate");
            window.sessionStorage.removeItem("SettingValues");
            window.sessionStorage.removeItem("InputOption");
            window.sessionStorage.removeItem("CatID");
            window.sessionStorage.removeItem("SubCatID");
            window.sessionStorage.removeItem("CatNature");
            window.sessionStorage.removeItem("BackPage");
            window.sessionStorage.removeItem("subCatTitle");
            window.sessionStorage.removeItem("UserIDShared");
            window.sessionStorage.removeItem("subCatID");
            window.sessionStorage.removeItem("CatTitle");
            window.sessionStorage.removeItem("WelcomeAlert");


            location.href = "./";
        }

        function OpenProject(ProjectId) {


            sessionStorage.setItem("ProjectId", ProjectId)

            var random = Math.random() * 1000;
            window.location.href = "MainPage.html?" + random;
        }

        function CreateProjects() {

            var UserID = sessionStorage.getItem("UserID");
            var txtProject = document.getElementById("txtProject").value;

            $.ajax({
                type: 'POST',
                url: 'Project.asmx/CreateProjects',
                dataType: 'json',
                data: "{'UserID':'" + UserID + "','ProjectName':'" + txtProject + "'}",
                contentType: 'application/json; charset=utf-8',
                success: function (response) {
                    alert("Project Has Been Added")
                    document.getElementById("txtProject").value = '';
                    $("#myAddExpes").modal('hide')
                    GetBusinessProjects()
                },
                error: function (error) {
                    console.log(error);
                }
            });
        }



    </script>






</body>



</html>

